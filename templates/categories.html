<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Categories - Hamro Pasal</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.1/css/all.min.css"
      integrity="sha512-5Hs3dF2AEPkpNAR7UiOHba+lRSJNeM2ECkwxUIxC1Q/FLycGTbNapWXB4tP889k5T5Ju8fs4b1P5z/iB4nMfSQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Georgia", serif;
        background: linear-gradient(
          135deg,
          #8b4513 0%,
          #a0522d 25%,
          #2f1b14 75%,
          #000000 100%
        );
        min-height: 100vh;
        color: #2f1b14;
      }

      .categories {
        display: flex;
        min-height: 100vh;
      }

      .info {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 25px;
        padding: 30px;
        flex: 1;
        background: rgba(245, 245, 220, 0.1);
        backdrop-filter: blur(10px);
      }

      .products {
        background: linear-gradient(145deg, #f5f5dc, #faebd7);
        border: none;
        padding: 25px;
        text-align: center;
        border-radius: 20px;
        box-shadow: 0 10px 30px rgba(139, 69, 19, 0.2),
          inset 0 1px 0 rgba(255, 255, 255, 0.3);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        overflow: hidden;
        position: relative;
        cursor: pointer;
      }

      .products::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(139, 69, 19, 0.1),
          transparent
        );
        transition: left 0.6s;
      }

      .products:hover::before {
        left: 100%;
      }

      .products:hover {
        transform: translateY(-8px) scale(1.02);
        box-shadow: 0 20px 40px rgba(139, 69, 19, 0.3),
          inset 0 1px 0 rgba(255, 255, 255, 0.4);
      }

      .product h3 {
        color: #8b4513;
        font-size: 1.4em;
        margin-bottom: 15px;
        font-weight: 600;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
      }

      .product img {
        border-radius: 15px;
        box-shadow: 0 8px 20px rgba(139, 69, 19, 0.2);
        transition: transform 0.3s ease;
        margin: 15px 0;
      }

      .products:hover .product img {
        transform: scale(1.05);
      }

      .product p {
        margin: 10px 0;
        color: #654321;
        font-size: 1.1em;
        font-weight: 500;
      }

      .product p strong {
        color: #8b4513;
        font-weight: 700;
      }

      .detail-button {
        background: linear-gradient(135deg, #d2b48c, #deb887);
        border: 2px solid #8b4513;
        padding: 12px 24px;
        border-radius: 25px;
        color: #8b4513;
        margin: 20px auto;
        display: inline-block;
        font-weight: 700;
        text-decoration: none;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(139, 69, 19, 0.2);
        position: relative;
        overflow: hidden;
      }

      .detail-button::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, #8b4513, #a0522d);
        transition: left 0.3s ease;
        z-index: -1;
      }

      .detail-button:hover::before {
        left: 0;
      }

      .detail-button:hover {
        color: #f5f5dc;
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(139, 69, 19, 0.4);
      }

      .cart-button {
        margin-top: 20px;
        padding: 12px 16px;
        border-radius: 50%;
        width: 50px;
        height: 50px;
        background: linear-gradient(135deg, #cd853f, #d2691e);
        border: none;
        color: #f5f5dc;
        font-weight: bold;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 6px 20px rgba(205, 133, 63, 0.3);
        position: relative;
        overflow: hidden;
      }

      .cart-button::before {
        content: "";
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: 0;
        background: rgba(245, 245, 220, 0.3);
        border-radius: 50%;
        transition: all 0.3s ease;
        transform: translate(-50%, -50%);
      }

      .cart-button:hover::before {
        width: 100px;
        height: 100px;
      }

      .cart-button:hover {
        background: linear-gradient(135deg, #d2691e, #b8860b);
        transform: scale(1.1) rotate(5deg);
        box-shadow: 0 10px 30px rgba(205, 133, 63, 0.5);
      }

      .cart-button:active {
        transform: scale(0.95);
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .info {
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 20px;
          padding: 20px;
        }

        .products {
          padding: 20px;
        }

        .product h3 {
          font-size: 1.2em;
        }
      }

      @media (max-width: 480px) {
        .info {
          grid-template-columns: 1fr;
          padding: 15px;
        }

        .categories {
          flex-direction: column;
        }
      }

      /* Loading Animation */
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .products {
        animation: fadeInUp 0.6s ease forwards;
      }

      .products:nth-child(even) {
        animation-delay: 0.1s;
      }

      .products:nth-child(3n) {
        animation-delay: 0.2s;
      }
    </style>
  </head>
  <body>
    {%include 'heads.html' %} {%include 'signup.html' %} {%include 'signin.html'
    %}

    <div class="categories">
      {% include 'categorybutton.html' %}
      <div class="info">
        {% if products1 %} {% for product in products1 %}
        <div
          class="products"
          data-href="{{ url_for('product_detail', pid=product['productId']) }}"
          onclick="redirectToDetail(this)"
        >
          <div class="product">
            <h3>{{ product['productname'] }}</h3>
            <div>
              <img
                src="{{product['imageurl'].split('|')[0].strip()}}"
                alt="{{ product['name'] }}"
                height="200px"
                width="200px"
              />
            </div>
            <p><strong>Rating:</strong> {{ product['rating'] }}</p>
            <p><strong>Category:</strong> {{ product['category'] }}</p>
            <p><strong>Price:</strong> Rs {{ product['price'] }}</p>
            <form
              action="/cart"
              method="post"
              onclick="event.stopPropagation();"
            >
              <input
                type="hidden"
                name="pid"
                value="{{product['productId']}}"
              />
              <input
                type="hidden"
                name="pname"
                value="{{product['productname']}}"
              />
              <input
                type="hidden"
                name="image"
                value="{{ product['imageurl'].split('|')[0].strip() }}"
              />
              <input type="hidden" name="price" value="{{product['price']}}" />
              <button type="submit" class="cart-button">
                <i class="fas fa-shopping-cart fa-lg"></i>
              </button>
            </form>
          </div>
        </div>
        {% endfor %} {% endif %}
      </div>
    </div>
    {%include 'foots.html' %}

    <script>
      function redirectToDetail(element) {
        const url = element.getAttribute("data-href");
        window.location.href = url;
      }

      // Add ripple effect to cart buttons
      document.querySelectorAll(".cart-button").forEach((button) => {
        button.addEventListener("click", function (e) {
          e.stopPropagation();

          // Create ripple effect
          const ripple = document.createElement("span");
          const rect = this.getBoundingClientRect();
          const size = Math.max(rect.width, rect.height);
          const x = e.clientX - rect.left - size / 2;
          const y = e.clientY - rect.top - size / 2;

          ripple.style.width = ripple.style.height = size + "px";
          ripple.style.left = x + "px";
          ripple.style.top = y + "px";
          ripple.classList.add("ripple");

          this.appendChild(ripple);

          setTimeout(() => {
            ripple.remove();
          }, 600);
        });
      });

      // Add staggered animation on load
      window.addEventListener("load", function () {
        const products = document.querySelectorAll(".products");
        products.forEach((product, index) => {
          product.style.animationDelay = index * 0.1 + "s";
        });
      });
    </script>

    <style>
      .ripple {
        position: absolute;
        border-radius: 50%;
        background: rgba(245, 245, 220, 0.6);
        transform: scale(0);
        animation: ripple-animation 0.6s linear;
        pointer-events: none;
      }

      @keyframes ripple-animation {
        to {
          transform: scale(4);
          opacity: 0;
        }
      }
    </style>
  </body>
</html>
